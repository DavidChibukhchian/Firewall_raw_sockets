# **Реализация межсетевого экрана на сырых сокетах**

Для сборки проекта используйте ```make```.

Запускайте программу командой
```
sudo ./firewall <interface1> <interface2> <rules.txt>
```

Чтобы остановить работу межсетевого экрана, нажмите ```Ctrl + C```.
## Правила обработки пакетов

Добавление и редактирование правил для обработки пакетов происходит в файле ```rules.txt```.

На каждой строчке определите по одному правилу. Запишите параметры правила в порядке ```action```, ```protocol_name```, ```src_ip```, ```dst_ip```, ```src_port```, ```dst_port```, где 
* ```action``` &mdash; принимает значения ```0``` и ```1```. В первом случае означает, что пакет, удовлетворяющий данному правилу, необходимо пропускать, во втором случае &mdash; блокировать;
* ```protocol_name``` &mdash; название протокола;
* ```src_ip``` &mdash; IP-адрес отправителя пакета. Значение ```0.0.0.0``` устанавливает, что данное поле проверяться не будет;
* ```dst_ip``` &mdash; IP-адрес получателя пакета. Значение ```0.0.0.0``` устанавливает, что данное поле проверяться не будет;
* ```src_port``` &mdash; порт отправителя пакета. Значение ```0``` устанавливает, что данное поле проверяться не будет;
* ```dst_port``` &mdash; порт получателя пакета. Значение ```0``` устанавливает, что данное поле проверяться не будет.

Пример корректного файла ```rules.txt```:
```
1 TCP 192.168.1.1 192.168.2.2 80 0
0 UDP 0.0.0.0 192.168.0.255 53 0
1 ICMP 192.168.1.1 0.0.0.0 0 0
```

Особенностью реализации является тот факт, что общий характер списка правил (белый или чёрный список) определяется значением параметра ```action``` последнего правила:
* Если это значение равно ```0```, то список является белым, и пакет пропускается, только если он удовлетовряет хотя бы одному правилу из списка;
* Если это значение равно ```1```, то список является чёрным, и пакет пропускается, только если он не удовлетворяет никакому правилу из списка.