# **Реализация межсетевого экрана на сырых сокетах**

Для сборки проекта используйте ```make```.

Запускайте программу командой
```
./firewall <interface1> <interface2> <rules.txt>
```

## Правила обработки пакетов

Добавление и редактирование правил для обработки пакетов происходит в файле ```rules.txt```.
на каждой строчке определите правила в порядке ```action```, ```protocol_name```, ```src_ip```, ```dst_ip```, ```src_port```, ```dst_port```, где 
* ```action``` - принимает значения ```0``` и ```1```. В первом случае означает, что пакет, удовлетворяющий данному правилу, необходимо пропускать, во втором случае - блокировть;
* ```protocol_name``` - название протокола;
* ```src_ip``` - IP-адрес отправителя пакета. Значение ```0.0.0.0```  означает, что данное поле проверяться не будет;
* ```dst_ip``` - IP-адрес получателя пакета. Значение ```0.0.0.0```  означает, что данное поле проверяться не будет;
* ```src_port``` - порт отправителя пакета. Значение ```0``` означает, что данное поле проверяться не будет;
* ```dst_port``` - порт получателя пакета. Значение ```0``` означает, что данное поле проверяться не будет;

Пример корректного файла ```rules.txt```:
```
1 TCP 192.168.1.1 192.168.2.2 80 0
0 UDP 0.0.0.0 192.168.0.255 53 0
1 ICMP 192.168.1.1 0.0.0.0 0 0
```

Особенностью реализации является тот факт, что общий характер списка правил (белый или чёрный список) определяется значением поля ```action``` последнего правила:
* Если это значение равно ```0```, то список является белым, и пакет пропускается, только если он удовлетовряет хотя бы одному правилу из списка;
* Если это значение равно ```1```, то список является чёрным, и пакет пропускается, только если он не удовлетворяет никакому правилу из списка.